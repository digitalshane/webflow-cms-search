"use strict";(()=>{(function(){function w(n,a){let o;return function(...d){clearTimeout(o),o=setTimeout(()=>n.apply(this,d),a)}}function g(){let n=document.querySelector('[data-tag="search"]'),a=document.querySelector('[data-tag="results"]'),o=document.querySelector('[data-tag="results-item"]');if(!n){console.warn("Webflow Search: No element with data-tag='search' found");return}if(!a){console.warn("Webflow Search: No element with data-tag='results' found");return}if(!o){console.warn("Webflow Search: No element with data-tag='results-item' found");return}let d=n.getAttribute("data-api-url")||window.location.origin,p=n.getAttribute("data-scope")||"all",l=n.getAttribute("data-collections")||"",E=parseInt(n.getAttribute("data-debounce")||"300",10);if(!l){console.error("Webflow Search: data-collections attribute is required on search input");return}o.style.display="none";let f={apiUrl:d,collections:p==="all"?l:l.split(",").find(t=>t.trim()===p)||l,debounceMs:E};async function S(t){if(!t.trim()){m();return}try{let e=new URL("/api/search",f.apiUrl);e.searchParams.set("q",t),e.searchParams.set("collections",f.collections);let r=await fetch(e.toString());if(!r.ok)throw new Error(`Search failed: ${r.status}`);let i=await r.json();T(i.results)}catch(e){console.error("Webflow Search error:",e),m()}}function m(){if(!a||!o)return;Array.from(a.children).forEach(e=>{e!==o&&e.remove()})}function T(t){!a||!o||(m(),t.length!==0&&t.forEach(e=>{let r=o.cloneNode(!0);r.style.display="",r.removeAttribute("data-tag");let i=r.querySelector('[data-tag="results-title"]');i&&(i.textContent=e.name);let u=r.querySelector('[data-tag="results-link"]');u&&(u.href=`/${e.slug}`,(!i||u===i)&&(u.textContent=e.name)),r.querySelectorAll("[data-field]").forEach(s=>{let c=s.getAttribute("data-field");if(c&&e.fieldData[c]!==void 0){let h=e.fieldData[c];s instanceof HTMLAnchorElement&&c.includes("url")?s.href=String(h):s instanceof HTMLImageElement&&c.includes("image")?s.src=String(h):s.textContent=String(h)}}),a.appendChild(r)}))}let y=w(t=>S(t),f.debounceMs);n.addEventListener("input",t=>{let e=t.target;y(e.value)});let b=n.closest("form");b&&b.addEventListener("submit",t=>{t.preventDefault(),S(n.value)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g()})();})();
